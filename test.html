<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Accord Church - System Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .test-section {
            background: #f5f5f5;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 4px solid #3498db;
        }
        .success {
            border-left-color: #27ae60;
            background: #d5f4e6;
        }
        .error {
            border-left-color: #e74c3c;
            background: #fdf2f2;
        }
        .warning {
            border-left-color: #f39c12;
            background: #fef9e7;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #2980b9;
        }
        .results {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .test-item {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }
        .test-item:last-child {
            border-bottom: none;
        }
        .pass { color: #27ae60; }
        .fail { color: #e74c3c; }
    </style>
</head>
<body>
    <h1>üèõÔ∏è Accord Church Management System - Test Suite</h1>
    
    <div class="test-section">
        <h2>System Requirements Check</h2>
        <p>This page will test if your browser and system meet the requirements for running Accord Church Management System.</p>
        <button onclick="runSystemTests()">Run System Tests</button>
        <div id="systemResults" class="results" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>Feature Tests</h2>
        <p>Test core functionality of the church management system.</p>
        <button onclick="runFeatureTests()">Run Feature Tests</button>
        <div id="featureResults" class="results" style="display: none;"></div>
    </div>

    <div class="test-section">
        <h2>Performance Tests</h2>
        <p>Check system performance with sample data.</p>
        <button onclick="runPerformanceTests()">Run Performance Tests</button>
        <div id="performanceResults" class="results" style="display: none;"></div>
    </div>

    <div class="test-section success">
        <h2>‚úÖ Ready to Start</h2>
        <p>If all tests pass, you're ready to use the Accord Church Management System!</p>
        <button onclick="window.open('index.html', '_blank')">Launch Accord Church System</button>
    </div>

    <script>
        function runSystemTests() {
            const results = document.getElementById('systemResults');
            results.style.display = 'block';
            results.innerHTML = '<h3>Running System Tests...</h3>';
            
            const tests = [];
            
            // Browser compatibility
            tests.push({
                name: 'Modern Browser Support',
                test: () => {
                    return typeof localStorage !== 'undefined' && 
                           typeof JSON !== 'undefined' && 
                           typeof fetch !== 'undefined';
                }
            });
            
            // Local Storage
            tests.push({
                name: 'Local Storage Available',
                test: () => {
                    try {
                        localStorage.setItem('test', 'test');
                        localStorage.removeItem('test');
                        return true;
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            // JavaScript ES6 Features
            tests.push({
                name: 'ES6 Support (Classes, Arrow Functions)',
                test: () => {
                    try {
                        eval('class Test {}; const arrow = () => {};');
                        return true;
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            // CSS Grid and Flexbox
            tests.push({
                name: 'CSS Grid and Flexbox Support',
                test: () => {
                    const div = document.createElement('div');
                    return 'grid' in div.style && 'flex' in div.style;
                }
            });
            
            // Font Awesome (external dependency)
            tests.push({
                name: 'External Resources (Font Awesome)',
                test: () => {
                    // This is a basic check - actual loading happens in main app
                    return navigator.onLine !== false;
                }
            });
            
            let html = '<h3>System Test Results</h3>';
            let allPassed = true;
            
            tests.forEach(test => {
                const passed = test.test();
                allPassed = allPassed && passed;
                html += `<div class="test-item">
                    <span class="${passed ? 'pass' : 'fail'}">
                        ${passed ? '‚úÖ' : '‚ùå'} ${test.name}
                    </span>
                </div>`;
            });
            
            if (allPassed) {
                html += '<div class="test-section success"><strong>‚úÖ All system tests passed!</strong></div>';
            } else {
                html += '<div class="test-section error"><strong>‚ùå Some tests failed. Check browser compatibility.</strong></div>';
            }
            
            results.innerHTML = html;
        }
        
        function runFeatureTests() {
            const results = document.getElementById('featureResults');
            results.style.display = 'block';
            results.innerHTML = '<h3>Running Feature Tests...</h3>';
            
            const tests = [];
            
            // Data Management
            tests.push({
                name: 'Data Storage and Retrieval',
                test: () => {
                    try {
                        const testData = { test: 'data', number: 123 };
                        localStorage.setItem('accordTest', JSON.stringify(testData));
                        const retrieved = JSON.parse(localStorage.getItem('accordTest'));
                        localStorage.removeItem('accordTest');
                        return retrieved.test === 'data' && retrieved.number === 123;
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            // Form Validation
            tests.push({
                name: 'Form Validation Functions',
                test: () => {
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    const phoneRegex = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;
                    return emailRegex.test('test@example.com') && 
                           phoneRegex.test('(555) 123-4567');
                }
            });
            
            // Date Handling
            tests.push({
                name: 'Date Processing',
                test: () => {
                    try {
                        const date = new Date();
                        const formatted = date.toLocaleDateString();
                        const iso = date.toISOString();
                        return formatted.length > 0 && iso.includes('T');
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            // Array Operations
            tests.push({
                name: 'Data Filtering and Sorting',
                test: () => {
                    try {
                        const data = [
                            { name: 'John', age: 30 },
                            { name: 'Jane', age: 25 },
                            { name: 'Bob', age: 35 }
                        ];
                        const filtered = data.filter(item => item.age > 25);
                        const sorted = data.sort((a, b) => a.age - b.age);
                        return filtered.length === 2 && sorted[0].name === 'Jane';
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            // CSV Export Simulation
            tests.push({
                name: 'Data Export Capability',
                test: () => {
                    try {
                        const data = [['Name', 'Age'], ['John', '30'], ['Jane', '25']];
                        const csv = data.map(row => row.join(',')).join('\n');
                        return csv.includes('Name,Age') && csv.includes('John,30');
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            let html = '<h3>Feature Test Results</h3>';
            let allPassed = true;
            
            tests.forEach(test => {
                const passed = test.test();
                allPassed = allPassed && passed;
                html += `<div class="test-item">
                    <span class="${passed ? 'pass' : 'fail'}">
                        ${passed ? '‚úÖ' : '‚ùå'} ${test.name}
                    </span>
                </div>`;
            });
            
            if (allPassed) {
                html += '<div class="test-section success"><strong>‚úÖ All feature tests passed!</strong></div>';
            } else {
                html += '<div class="test-section error"><strong>‚ùå Some features may not work properly.</strong></div>';
            }
            
            results.innerHTML = html;
        }
        
        function runPerformanceTests() {
            const results = document.getElementById('performanceResults');
            results.style.display = 'block';
            results.innerHTML = '<h3>Running Performance Tests...</h3>';
            
            const tests = [];
            
            // Large Data Handling
            tests.push({
                name: 'Large Dataset Processing (1000 records)',
                test: () => {
                    const start = performance.now();
                    const largeData = Array.from({ length: 1000 }, (_, i) => ({
                        id: i,
                        name: `Member ${i}`,
                        email: `member${i}@church.org`
                    }));
                    const filtered = largeData.filter(item => item.id % 2 === 0);
                    const end = performance.now();
                    return (end - start) < 100; // Should complete in under 100ms
                }
            });
            
            // Memory Usage
            tests.push({
                name: 'Memory Efficiency',
                test: () => {
                    if (performance.memory) {
                        const used = performance.memory.usedJSHeapSize;
                        const limit = performance.memory.jsHeapSizeLimit;
                        return (used / limit) < 0.5; // Using less than 50% of available heap
                    }
                    return true; // Pass if memory API not available
                }
            });
            
            // DOM Manipulation Speed
            tests.push({
                name: 'DOM Manipulation Performance',
                test: () => {
                    const start = performance.now();
                    const container = document.createElement('div');
                    for (let i = 0; i < 100; i++) {
                        const element = document.createElement('div');
                        element.textContent = `Item ${i}`;
                        container.appendChild(element);
                    }
                    const end = performance.now();
                    return (end - start) < 50; // Should complete in under 50ms
                }
            });
            
            // Local Storage Performance
            tests.push({
                name: 'Storage Performance',
                test: () => {
                    try {
                        const start = performance.now();
                        const testData = { large: 'x'.repeat(10000) };
                        localStorage.setItem('perfTest', JSON.stringify(testData));
                        const retrieved = JSON.parse(localStorage.getItem('perfTest'));
                        localStorage.removeItem('perfTest');
                        const end = performance.now();
                        return (end - start) < 100 && retrieved.large.length === 10000;
                    } catch (e) {
                        return false;
                    }
                }
            });
            
            let html = '<h3>Performance Test Results</h3>';
            let allPassed = true;
            
            tests.forEach(test => {
                const passed = test.test();
                allPassed = allPassed && passed;
                html += `<div class="test-item">
                    <span class="${passed ? 'pass' : 'fail'}">
                        ${passed ? '‚úÖ' : '‚ùå'} ${test.name}
                    </span>
                </div>`;
            });
            
            if (allPassed) {
                html += '<div class="test-section success"><strong>‚úÖ Performance tests passed! System should run smoothly.</strong></div>';
            } else {
                html += '<div class="test-section warning"><strong>‚ö†Ô∏è Some performance tests failed. System may be slower with large datasets.</strong></div>';
            }
            
            results.innerHTML = html;
        }
        
        // Auto-run system tests on page load
        window.addEventListener('load', () => {
            setTimeout(runSystemTests, 1000);
        });
    </script>
</body>
</html>
