<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reports & Analytics - Accord Church</title>
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/reports.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="top-nav">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="../index.html">
                    <i class="fas fa-church"></i>
                    <span>Accord Church</span>
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="../index.html"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="members.html"><i class="fas fa-users"></i> Members</a></li>
                <li><a href="events.html"><i class="fas fa-calendar-alt"></i> Events</a></li>
                <li><a href="donations.html"><i class="fas fa-hand-holding-usd"></i> Donations</a></li>
                <li><a href="ministries.html"><i class="fas fa-hands-helping"></i> Ministries</a></li>
                <li><a href="reports.html" class="active"><i class="fas fa-chart-bar"></i> Reports</a></li>
                <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
            </ul>
            <div class="nav-user">
                <span>Admin User</span>
                <i class="fas fa-user-circle"></i>
            </div>
        </div>
    </nav>

    <div class="reports-page">
        <!-- Header Section -->
        <header class="page-header">
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-chart-line"></i> Reports & Analytics</h1>
                    <p>Comprehensive insights and analytics for church management</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-primary" id="customReportBtn">
                        <i class="fas fa-plus"></i> Custom Report
                    </button>
                    <button class="btn btn-secondary" id="scheduleReportBtn">
                        <i class="fas fa-clock"></i> Schedule
                    </button>
                    <button class="btn btn-info" id="dashboardBtn">
                        <i class="fas fa-tachometer-alt"></i> Dashboard
                    </button>
                </div>
            </div>
        </header>

        <!-- Quick Stats Overview -->
        <section class="quick-stats">
            <div class="stats-grid">
                <div class="stat-card members">
                    <div class="stat-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalMembersCount">0</h3>
                        <p>Total Members</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+5.2%</span>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card donations">
                    <div class="stat-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalDonationsAmount">$0</h3>
                        <p>Total Donations</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+12.8%</span>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card events">
                    <div class="stat-icon">
                        <i class="fas fa-calendar"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="totalEventsCount">0</h3>
                        <p>Events This Month</p>
                        <div class="stat-change neutral">
                            <i class="fas fa-minus"></i>
                            <span>0%</span>
                        </div>
                    </div>
                </div>
                
                <div class="stat-card attendance">
                    <div class="stat-icon">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <div class="stat-content">
                        <h3 id="averageAttendance">0</h3>
                        <p>Avg. Attendance</p>
                        <div class="stat-change positive">
                            <i class="fas fa-arrow-up"></i>
                            <span>+8.1%</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Report Categories -->
        <section class="report-categories">
            <div class="categories-grid">
                <!-- Member Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Member Reports</h3>
                    </div>
                    <div class="category-content">
                        <p>Comprehensive member analytics and demographics</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('member-directory')">
                                <i class="fas fa-address-book"></i>
                                <span>Member Directory</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('member-demographics')">
                                <i class="fas fa-chart-pie"></i>
                                <span>Demographics</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('membership-growth')">
                                <i class="fas fa-chart-line"></i>
                                <span>Growth Analysis</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('inactive-members')">
                                <i class="fas fa-user-slash"></i>
                                <span>Inactive Members</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('birthday-anniversary')">
                                <i class="fas fa-birthday-cake"></i>
                                <span>Birthdays & Anniversaries</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Financial Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-dollar-sign"></i>
                        </div>
                        <h3>Financial Reports</h3>
                    </div>
                    <div class="category-content">
                        <p>Detailed financial analysis and giving reports</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('giving-summary')">
                                <i class="fas fa-hand-holding-usd"></i>
                                <span>Giving Summary</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('donor-analysis')">
                                <i class="fas fa-chart-bar"></i>
                                <span>Donor Analysis</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('fund-performance')">
                                <i class="fas fa-piggy-bank"></i>
                                <span>Fund Performance</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('tax-statements')">
                                <i class="fas fa-file-invoice-dollar"></i>
                                <span>Tax Statements</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('pledge-tracking')">
                                <i class="fas fa-handshake"></i>
                                <span>Pledge Tracking</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Event Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <h3>Event Reports</h3>
                    </div>
                    <div class="category-content">
                        <p>Event attendance and engagement analytics</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('attendance-summary')">
                                <i class="fas fa-user-check"></i>
                                <span>Attendance Summary</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('event-calendar')">
                                <i class="fas fa-calendar"></i>
                                <span>Event Calendar</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('popular-events')">
                                <i class="fas fa-star"></i>
                                <span>Popular Events</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('ministry-participation')">
                                <i class="fas fa-hands-helping"></i>
                                <span>Ministry Participation</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('event-feedback')">
                                <i class="fas fa-comments"></i>
                                <span>Event Feedback</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Ministry Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-hands-helping"></i>
                        </div>
                        <h3>Ministry Reports</h3>
                    </div>
                    <div class="category-content">
                        <p>Ministry involvement and volunteer tracking</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('ministry-overview')">
                                <i class="fas fa-church"></i>
                                <span>Ministry Overview</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('volunteer-hours')">
                                <i class="fas fa-clock"></i>
                                <span>Volunteer Hours</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('skills-talents')">
                                <i class="fas fa-tools"></i>
                                <span>Skills & Talents</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('ministry-leaders')">
                                <i class="fas fa-user-tie"></i>
                                <span>Ministry Leaders</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('outreach-impact')">
                                <i class="fas fa-globe"></i>
                                <span>Outreach Impact</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Communication Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-envelope"></i>
                        </div>
                        <h3>Communication</h3>
                    </div>
                    <div class="category-content">
                        <p>Communication effectiveness and engagement</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('contact-list')">
                                <i class="fas fa-address-card"></i>
                                <span>Contact Lists</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('email-campaigns')">
                                <i class="fas fa-paper-plane"></i>
                                <span>Email Campaigns</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('communication-preferences')">
                                <i class="fas fa-cog"></i>
                                <span>Preferences</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('newsletter-stats')">
                                <i class="fas fa-newspaper"></i>
                                <span>Newsletter Stats</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('follow-up-needed')">
                                <i class="fas fa-phone"></i>
                                <span>Follow-up Needed</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Administrative Reports -->
                <div class="category-card">
                    <div class="category-header">
                        <div class="category-icon">
                            <i class="fas fa-clipboard-list"></i>
                        </div>
                        <h3>Administrative</h3>
                    </div>
                    <div class="category-content">
                        <p>Administrative and operational reports</p>
                        <div class="report-list">
                            <button class="report-item" onclick="reportsManager.generateReport('system-usage')">
                                <i class="fas fa-chart-area"></i>
                                <span>System Usage</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('data-backup')">
                                <i class="fas fa-database"></i>
                                <span>Data Backup</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('user-activity')">
                                <i class="fas fa-user-clock"></i>
                                <span>User Activity</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('audit-trail')">
                                <i class="fas fa-history"></i>
                                <span>Audit Trail</span>
                            </button>
                            <button class="report-item" onclick="reportsManager.generateReport('system-health')">
                                <i class="fas fa-heartbeat"></i>
                                <span>System Health</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Recent Reports -->
        <section class="recent-reports">
            <div class="section-header">
                <h3><i class="fas fa-history"></i> Recent Reports</h3>
                <button class="btn btn-sm btn-secondary" id="viewAllReportsBtn">
                    View All <i class="fas fa-arrow-right"></i>
                </button>
            </div>
            <div class="recent-reports-list" id="recentReportsList">
                <!-- Recent reports will be populated here -->
            </div>
        </section>

        <!-- Scheduled Reports -->
        <section class="scheduled-reports">
            <div class="section-header">
                <h3><i class="fas fa-clock"></i> Scheduled Reports</h3>
                <button class="btn btn-sm btn-primary" id="addScheduleBtn">
                    <i class="fas fa-plus"></i> Add Schedule
                </button>
            </div>
            <div class="scheduled-reports-list" id="scheduledReportsList">
                <!-- Scheduled reports will be populated here -->
            </div>
        </section>
    </div>

    <!-- Report Viewer Modal -->
    <div class="modal-overlay" id="reportModal">
        <div class="modal extra-large">
            <div class="modal-header">
                <h3 id="reportModalTitle">Report</h3>
                <div class="modal-actions">
                    <button class="btn btn-sm btn-secondary" id="printReportBtn">
                        <i class="fas fa-print"></i> Print
                    </button>
                    <button class="btn btn-sm btn-info" id="exportReportBtn">
                        <i class="fas fa-download"></i> Export
                    </button>
                    <button class="btn btn-sm btn-success" id="emailReportBtn">
                        <i class="fas fa-envelope"></i> Email
                    </button>
                    <button class="modal-close" id="closeReportModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>
            <div class="modal-body" id="reportModalBody">
                <!-- Report content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Custom Report Builder Modal -->
    <div class="modal-overlay" id="customReportModal">
        <div class="modal large">
            <div class="modal-header">
                <h3>Custom Report Builder</h3>
                <button class="modal-close" id="closeCustomReportModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="customReportForm" class="custom-report-form">
                    <div class="form-section">
                        <h4><i class="fas fa-info-circle"></i> Report Information</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Report Name *</label>
                                <input type="text" class="form-control" id="reportName" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <input type="text" class="form-control" id="reportDescription">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-database"></i> Data Source</h4>
                        <div class="form-group">
                            <label class="form-label">Primary Data Source *</label>
                            <select class="form-control" id="dataSource" required>
                                <option value="">Select Data Source</option>
                                <option value="members">Members</option>
                                <option value="donations">Donations</option>
                                <option value="events">Events</option>
                                <option value="attendance">Attendance</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-columns"></i> Fields to Include</h4>
                        <div class="fields-selection" id="fieldsSelection">
                            <!-- Fields will be populated based on data source -->
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-filter"></i> Filters</h4>
                        <div class="filters-container" id="filtersContainer">
                            <button type="button" class="btn btn-sm btn-secondary" id="addFilterBtn">
                                <i class="fas fa-plus"></i> Add Filter
                            </button>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4><i class="fas fa-sort"></i> Sorting & Grouping</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Sort By</label>
                                <select class="form-control" id="sortBy">
                                    <option value="">No Sorting</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Sort Order</label>
                                <select class="form-control" id="sortOrder">
                                    <option value="asc">Ascending</option>
                                    <option value="desc">Descending</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Group By</label>
                            <select class="form-control" id="groupBy">
                                <option value="">No Grouping</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-chart-bar"></i> Generate Report
                        </button>
                        <button type="button" class="btn btn-success" id="saveReportTemplateBtn">
                            <i class="fas fa-save"></i> Save as Template
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancelCustomReportBtn">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Schedule Report Modal -->
    <div class="modal-overlay" id="scheduleModal">
        <div class="modal medium">
            <div class="modal-header">
                <h3>Schedule Report</h3>
                <button class="modal-close" id="closeScheduleModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="scheduleForm" class="schedule-form">
                    <div class="form-group">
                        <label class="form-label">Report Type *</label>
                        <select class="form-control" id="scheduleReportType" required>
                            <option value="">Select Report</option>
                            <option value="member-directory">Member Directory</option>
                            <option value="giving-summary">Giving Summary</option>
                            <option value="attendance-summary">Attendance Summary</option>
                            <option value="financial-summary">Financial Summary</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Frequency *</label>
                        <select class="form-control" id="scheduleFrequency" required>
                            <option value="">Select Frequency</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly">Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="annually">Annually</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email Recipients</label>
                        <textarea class="form-control" id="scheduleRecipients" rows="3" 
                                  placeholder="Enter email addresses separated by commas"></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Start Date</label>
                        <input type="date" class="form-control" id="scheduleStartDate">
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-clock"></i> Schedule Report
                        </button>
                        <button type="button" class="btn btn-secondary" id="cancelScheduleBtn">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="../js/utils.js"></script>
    <script src="../js/reports-enhanced.js"></script>
</body>
</html>
